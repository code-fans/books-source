#include <bits/stdc++.h>
using namespace std;
const int inf =0x7fffffff;
int a[2000009],sum,tot,n;
int l[2000009],r[2000009];

int Cal()
{
  int ans=-inf;
  memset(l,0,sizeof(l));
  memset(r,0,sizeof(r));
  for(int i=1; i<=n; i++)//´Ó×óµ½ÓÒÕÒ×î´ó×Ó´®
    l[i]=max(l[i-1],0)+a[i];
  for(int i=n; i>=1; i--)//´ÓÓÒµ½×óÕÒ×î´ó×Ó´®
    r[i]=max(r[i+1],0)+a[i];
  for(int i=1; i<=n; i++)//ÒÔ¸ÃµãÎª½çÕÒ×ó×î´ó×Ó´®
    l[i]=max(l[i],l[i-1]);
  for(int i=n; i>=1; i--)//ÒÔ¸ÃµãÎª½çÕÒÓÒ×î´ó×Ó´®
    r[i]=max(r[i],r[i+1]);
  for(int i=1; i<=n; i++)//ÇóÁ½¶Î×î´ó×ÓÐòÁÐºÍ
    ans=max(ans,l[i]+r[i+1]);
  return ans;
}

int main()
{
  cin>>n;
  int Max1=-inf;
  int Max2=-inf;
  for(int i=1; i<=n; i++)
  {
    cin>>a[i];
    if(a[i]>Max1)
      Max1=a[i];
    else if(a[i]>Max2)
      Max2=a[i];
    sum+=a[i];
    tot+=a[i]>0;
  }
  int ans=Cal();
  if(tot<=1)
    cout<<Max1+Max2<<endl;
  else
  {
    for(int i=1; i<=n; i++)
      a[i]=-a[i];
    cout<<max(ans,sum+Cal())<<0<<endl;
  }
  return 0;
}
